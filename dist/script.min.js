/* ClipPop v1.0.0 Copyright 2025 withApps Licensed under Creative Commons Legal Code (https://github.com/withapps/ClipPop/blob/main/LICENSE)*/'use strict';(function(t,l){const T=navigator.userAgent;var P=t.location.pathname;const F=l.querySelectorAll.bind(l),q=l.querySelector.bind(l),I=atob,U=(new RegExp("[?&]"+encodeURIComponent("mid")+"=([^&]*)")).exec(l.currentScript.src)[1],V=(new RegExp("[?&]"+encodeURIComponent("client_id")+"=([^&]*)")).exec(l.currentScript.src)[1],pa=b=>{b=F(b);try{return b[0].getAttribute("content")}catch(a){return""}},D=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(T)?!0:!1,qa=(P=P.match(/\/skin-([a-z]+)\/?/))&&P[0]?P[0]:"",Q=I("aHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaQ==");if(!U||!V)return!1;let G="",k={},L=-1,R=0,M=!0,m="",J=!0,y=!1,z=0,A=0,S="object"===typeof CAFE24&&"undefined"!==typeof CAFE24.SDE_SHOP_NUM?CAFE24.SDE_SHOP_NUM:null;const ra=function(b){return new Promise(function(a,c){(function(d){d.get(b,function(f,h){f&&console.error(f);f?c(f):a(h)})})(CAFE24API.init({client_id:V}))})},H=(b,a={})=>{b=l.createElement(b);a.id&&(b.id=a.id);a.class&&(Array.isArray(a.class)?b.classList.add(...a.class):"string"===typeof a.class&&(b.className=a.class));if(a.attributes)for(var c in a.attributes)a.attributes.hasOwnProperty(c)&&b.setAttribute(c,a.attributes[c]);a.textContent?b.textContent=a.textContent:a.htmlContent&&(b.innerHTML=a.htmlContent);if(a.parentNode){if("string"===typeof a.parentNode){if(c=l.getElementById(a.parentNode),!c)return console.error(`Parent element with ID "${a.parentNode}" not found.`),b}else if(a.parentNode instanceof HTMLElement)c=a.parentNode;else return console.error("Invalid parentNode option."),b;c.appendChild(b)}return b},Y=(b,a)=>{let c=b?b.toLocaleString("ko-KR"):"";if(b&&a){var d=0===b||0===a||a>=b?0:Math.ceil((b-a)/b*100);d&&(c=`<strike>${b.toLocaleString("ko-KR")}</strike><salerate>${d}</salerate>${a.toLocaleString("ko-KR")}`)}return c},Z=(b,a,c)=>`            <div class="cp-shortform-img"><img src="${b}" loading="lazy"></div>            <div class="cp-shortform-desc">                <div class="cp-shortform-title">${a}</div>                <div class="cp-shortform-price">${c}</div>            </div>                `,aa=()=>{!J&&k[m].isMuted()?k[m].unMute():J&&!k[m].isMuted()&&k[m].mute()},N=()=>{console.log("check playing state: ",m,y);if(m&&!y){var b=`#clippop-player-container-${k[m].type&&"instagram"==k[m].type?"instagram":"youtube"}-${m}`;var a=q(b);a?(b=a.getBoundingClientRect(),b=0<=b.top&&0<=b.left&&b.bottom<=window.innerHeight&&b.right<=window.innerWidth):(console.warn(`Element with ID "${b}" not found.`),b=!1);a=k[m].getPlayerState();b&&a!==YT.PlayerState.PLAYING&&(k[m].playVideo(),console.log("restart playing: ",m))}},ba=()=>{const b=q("#clippop-link-to-origin-btn");m&&k[m]&&(b.style.visibility="instagram"==(k[m].type&&"instagram"==k[m].type?"instagram":"youtube")?"visible":"hidden")},sa=b=>{console.log(`ClipPop ready for youtube: ${b.target.getVideoData().video_id}`)},ca=()=>{if(1<R){const b=q("#clippop-scroll-down-btn"),a=new Event("click",{bubbles:!0,cancelable:!0});b.dispatchEvent(a)}else k[currentPlayerId]&&(k[currentPlayerId].seekTo(0),k[currentPlayerId].playVideo())},ta=b=>{const a=b.target.getVideoData().video_id;console.log("changed state: ",b.data,a);b.data===YT.PlayerState.ENDED?ca():b.data===YT.PlayerState.PAUSED?setTimeout(N,1500):b.data===YT.PlayerState.PLAYING&&(m=a,ba(),aa(),y&&k[a].pauseVideo())},da=(b,a,c)=>{let d;return(...f)=>{const h=this,g=c&&!d;clearTimeout(d);d=setTimeout(()=>{d=null;c||b.apply(h,f)},a);g&&b.apply(h,f)}},ua=(b,a)=>{b.forEach(c=>{var d=c.target,f=d.getAttribute("data-video-type");const h=d.getAttribute("data-video-id");let g=null;if("youtube"===f||"instagram"===f)if(g=h,!g||!k[g])return;f=Array.from(F(".cp-shortform-video"));d=f.indexOf(d);if(c.isIntersecting){if(d!==L){if(-1!==L&&(c=f[L].getAttribute("data-video-id"))&&k[c])try{k[c].pauseVideo(),k[c].mute()}catch(n){console.error("prev pauseback failed:",n),setTimeout(N,1500)}if(g){if(k[g])try{k[g].seekTo(0),y||k[g].playVideo()}catch(n){console.error("playback failed:",n),m=g,setTimeout(N,1500)}else console.error("playback not found.");L=d}}}else if(g&&m!=g&&k[g])try{k[g].pauseVideo(),k[g].mute()}catch(n){console.error("pauseback failed:",n),setTimeout(N,1500)}})},ea=()=>{const b=new IntersectionObserver(ua,{root:null,rootMargin:"0px",threshold:.8});Array.from(F(".cp-shortform-video")).forEach((a,c)=>{a.getAttribute("data-video-id")&&b.observe(a)})},wa=b=>{const a=q("#clippop-shortform-container-wrapper-"+G),c=q("#clippop-top-btn-container"),d=q("#clippop-link-to-origin-btn"),f=q("#clippop-close-player-btn"),h=q("#clippop-mute-player-btn");let g=!1,n,v,w=null;const r=e=>{if("mousedown"!==e.type||0===e.button){g=!0;var x=a.getBoundingClientRect();if("touchstart"===e.type){if(!e.target||!e.target.id||"clippop-buttons-container"!=e.target.id)return;var C=e.touches[0];var O=C.clientX;C=C.clientY}else O=e.clientX,C=e.clientY;n=O-x.left;v=C-x.top;a.style.cursor="grabbing";l.body.classList.add("cp-shortform-container-dragging");D?(l.addEventListener("touchmove",p),l.addEventListener("touchend",B)):(l.addEventListener("mousemove",p),l.addEventListener("mouseup",B));e.preventDefault()}},p=e=>{if(g){if("touchmove"===e.type){e=e.touches[0];var x=e.clientX;e=e.clientY}else x=e.clientX,e=e.clientY;z=x-n;A=e-v;z=Math.max(0,Math.min(t.innerWidth-a.offsetWidth,z));A=Math.max(0,Math.min(t.innerHeight-a.offsetHeight,A));a.style.left=z+"px";a.style.top=A+"px";a.style.bottom="auto";a.style.right="auto"}},B=()=>{g&&(g=!1,a.style.cursor="grab",l.body.classList.remove("cp-shortform-container-dragging"),D?(l.removeEventListener("touchmove",p),l.removeEventListener("touchend",B),K()):(l.removeEventListener("mousemove",p),l.removeEventListener("mouseup",K)))},u=()=>{K(!0,!1)},E=()=>{let e=!1;const x=t.innerWidth-a.offsetWidth,C=t.innerHeight-a.offsetHeight;0>z?(z=0,e=!0):z>x&&(z=x,e=!0);0>A?(A=0,e=!0):A>C&&(A=C,e=!0);e&&(a.style.transition="all 0.3s ease",a.style.left=z+"px",a.style.top=A+"px",a.style.bottom="auto",a.style.right="auto",setTimeout(()=>{a.style.transition=""},300))},fa=()=>{setTimeout(E,900)},K=(e=!0,x=!0)=>{clearTimeout(w);c.style.display=e?"flex":"none";e&&x&&!M&&(w=setTimeout(K,5E3,!1))},ha=e=>{e.preventDefault();e.stopPropagation();a.classList.remove("cp-shortform-container-pip-wrapper");a.classList.add("cp-shortform-container-wrapper");a.style.top="0px";a.style.left="0px";D?(a.removeEventListener("touchstart",r),t.removeEventListener("orientationchange",fa)):(a.removeEventListener("mousedown",r),a.removeEventListener("mouseover",u),a.removeEventListener("mouseout",K));a.style.cursor="default";W(!0)},W=e=>{M=e;var x=q("#clippop-fullscreen-player-btn"),C=q("#clippop-buttons-container");const O=q("#clippop-play-btn-container"),ia=q("#clippop-scroll-btn-container");x&&(x.style.display=e?"none":"block",e?(x.removeEventListener("click",ha),C.style.pointerEvents="none",O.style.visibility="visible",ia.style.visibility="visible",d.style.display="block",l.body.classList.add("cp-shortform-container-no-scroll")):(x.addEventListener("click",ha),C.style.pointerEvents="inherit",O.style.visibility="hidden",ia.style.visibility="hidden",l.body.classList.remove("cp-shortform-container-no-scroll"),D?(a.addEventListener("touchstart",r),t.addEventListener("orientationchange",fa),d.style.display="none"):(d.style.display="block",a.addEventListener("mousedown",r),a.addEventListener("mouseover",u),a.addEventListener("mouseout",K)),a.style.cursor="grab"));m&&(e=m)&&(x=q("#clippop-shortform-container"),(C=q(`.cp-shortform-video[data-video-id="${e}"]`))?x.scrollTo(0,C.offsetTop):console.warn(`Video element with ID "${e}" not found.`));K()},va=e=>{e.preventDefault();e.stopPropagation();if(M){a.classList.remove("cp-shortform-container-wrapper");a.classList.add("cp-shortform-container-pip-wrapper");if(0!=z||0!=A)a.style.top=A+"px",a.style.left=z+"px";W(!1);y&&(e=new Event("click",{bubbles:!0,cancelable:!0}),D?a.dispatchEvent(e):q("#clippop-play-stop-btn").dispatchEvent(e))}else ja()},la=e=>{k[m]&&(e?k[m].mute():k[m].unMute(),J=e,ka(J))},ka=e=>{h.innerHTML=e?'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06M6 5.04 4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96zm7.854.606a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0"/>\n            </svg>\n            ':'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"viewBox="0 0 16 16">\n                <path d="M11.536 14.01A8.47 8.47 0 0 0 14.026 8a8.47 8.47 0 0 0-2.49-6.01l-.708.707A7.48 7.48 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303z"/>\n                <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.48 5.48 0 0 1 11.025 8a5.48 5.48 0 0 1-1.61 3.89z"/>\n                <path d="M10.025 8a4.5 4.5 0 0 1-1.318 3.182L8 10.475A3.5 3.5 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.5 4.5 0 0 1 10.025 8M7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12zM4.312 6.39 6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11"/>\n            </svg>\n            '};d&&d.addEventListener("click",e=>{e.preventDefault();e.stopPropagation();m&&k[m]&&(e=k[m].link)&&(la(!0),t.open(e,"_blank"))});f&&f.addEventListener("click",va);h&&(h.addEventListener("click",e=>{e.preventDefault();e.stopPropagation();la(!J)}),ka(J));(()=>{const e=a.getBoundingClientRect();z=e.left;A=e.top})();W("pip"!=b)},xa=()=>{const b=q("#clippop-shortform-container-wrapper-"+G),a=q("#clippop-shortform-container"),c=q("#clippop-scroll-btn-container"),d=q("#clippop-play-stop-btn");let f=null,h=null;const g=()=>{(()=>{d.style.display="block";d.classList.add("cp-animation-fade-in");f=setTimeout(()=>{d.classList.remove("cp-animation-fade-in");d.classList.add("cp-animation-fade-out");h=setTimeout(()=>{d.classList.remove("cp-animation-fade-out");d.style.display="none";d.style.opacity=0},2E3)},700)})()},n=p=>{p.preventDefault();p.stopPropagation();y=!y;k[m]&&(y?k[m].pauseVideo():k[m].playVideo());p=y?'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>\n                <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445"/>\n            </svg>\n            ':'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stop-circle" viewBox="0 0 16 16">\n                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>\n                <path d="M5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5z"/>\n            </svg>\n            ';clearTimeout(f);clearTimeout(h);d.innerHTML=p;d.className="cp-btn-animation-set";y?(d.style.display="block",d.classList.add("cp-animation-fade-in")):g()},v=()=>{y=l.hidden;k[m]&&(y?k[m].pauseVideo():k[m].playVideo())},w=p=>{const B=250<=p?"":"none";Array.from(F("#clippop-shortform-container-wrapper-"+G+" .cp-shortform-info")).forEach((u,E)=>{u.style.display=B});c.style.display=120<=t.innerWidth-p?"flex":"none"},r=new ResizeObserver(p=>{for(let B of p)p=B.contentRect.width,da(w,500)(p)});D?b.addEventListener("click",n):(a.addEventListener("click",n),d.addEventListener("click",n));d.style.display="none";r.observe(a);l.removeEventListener("visibilitychange",v);l.addEventListener("visibilitychange",v)},ya=()=>{const b=q("#clippop-shortform-container");var a=g=>{g.preventDefault();g.stopPropagation();b.scrollBy({top:-b.offsetHeight,behavior:"smooth"})};const c=g=>{g.preventDefault();g.stopPropagation();5>=b.scrollHeight-b.clientHeight-b.scrollTop||L==R-1?b.scrollTo(0,0):b.scrollBy({top:b.offsetHeight,behavior:"smooth"})},d=()=>{const g=q("#clippop-scroll-up-btn"),n=q("#clippop-scroll-down-btn"),v=0>=b.scrollTop,w=5>=b.scrollHeight-b.clientHeight-b.scrollTop;g&&(g.disabled=v,g.style.opacity=v?"0.5":"1",g.style.cursor=v?"default":"pointer");n&&(n.disabled=w,n.style.opacity=w?"0.5":"1",n.style.cursor=w?"default":"pointer")},f=q("#clippop-scroll-up-btn"),h=q("#clippop-scroll-down-btn");f&&f.addEventListener("click",a);h&&h.addEventListener("click",c);a=da(d,200);b.addEventListener("scroll",a);d()},za=()=>{F("[data-clippop-uid]").forEach(b=>{const a=b.getAttribute("data-clippop-uid");a&&(b.style.cursor="pointer",b.addEventListener("click",()=>{const c=q(I("I2NsaXBwb3Atc2hvcnRmb3JtLWNvbnRhaW5lci13cmFwcGVyLQ==")+a);c?M||(z=(t.innerWidth-c.offsetWidth)/2,A=(t.innerHeight-c.offsetHeight)/2,c.style.transition="all 0.3s ease",c.style.left=z+"px",c.style.top=A+"px",c.style.bottom="auto",c.style.right="auto",setTimeout(()=>{c.style.transition=""},300)):(ja(),ma(a))}))})},na=b=>{var a=F("img[data-clippop-embed]");if(!(0<a.length)||t.YT&&t.YT.Player&&q(`script[src="${Q}"]`))a.forEach(c=>{const d=c.getAttribute("data-clippop-embed"),f=c.getAttribute("data-clippop-align");if(d){const h=c.parentNode;h&&b.forEach(g=>{g.clip_data.forEach(n=>{n.product&&n.product.forEach(v=>{if(v.no==parseInt(d)){var w=c.offsetWidth,r=c.offsetHeight;v=l.createElement("div");v.style.cssText=`position: absolute;top: 0;left: 0;display: flex, justify-content: center, align-items: center; width: ${w}px; height: ${r}px; overflow:hidden`;h.appendChild(v);const p=l.createElement("div"),B=16/9*w;r=(B-r)/2*-1;f&&("top"==f?r=0:"bottom"==f&&(r*=2));p.style.cssText=`position: absolute;top:${r}px;left:0;width: ${w}px; height: ${B}px;`;v.appendChild(p);w=l.createElement("div");w.style.cssText="position: absolute;top: 0;left: 0;width: 100%;height: 100%;";v.appendChild(w);console.log(`Initializing ClipPop Embed video ID: ${n.id}`);if("youtube"==n.type){const u=new YT.Player(p,{height:"100%",width:"100%",videoId:n.id,playerVars:{enablejsapi:1,autoplay:1,controls:0,playsinline:1,mute:1,rel:0,loop:1,showinfo:0,origin:t.location.origin},events:{onReady:E=>{console.log(`YouTube Embed ready for video ID: ${E.target.getVideoData().video_id}`);E.target.playVideo()},onStateChange:E=>{E.data!==YT.PlayerState.ENDED&&E.data!==YT.PlayerState.PAUSED||l.hidden||(E.target.seekTo(0),E.target.playVideo())}}});l.addEventListener("visibilitychange",()=>{l.hidden?u.pauseVideo():u.playVideo()})}else if("instagram"==n.type){const u=l.createElement("video");u.setAttribute("poster",n.thum);u.setAttribute("src",n.url);u.setAttribute("muted","");u.setAttribute("playsinline","");u.style.cssText="width: 100%; height: 100%; object-fit: contain;";p.appendChild(u);u.addEventListener("canplaythrough",function(){u.play()});u.addEventListener("ended",()=>{u.currentTime=0;u.play()});l.addEventListener("visibilitychange",()=>{l.hidden?u.pause():u.play()})}}})})})}});else{a=l.createElement("script");a.src=Q;const c=l.getElementsByTagName("script")[0];c&&c.parentNode?c.parentNode.insertBefore(a,c):l.head.appendChild(a);setTimeout(na,900,b)}},X=()=>{Array.from(F("#clippop-shortform-container-wrapper-"+G+" .cp-shortform-video")).forEach((b,a)=>{a=b.getAttribute("data-video-type");const c=b.getAttribute("data-video-id"),d=b.getAttribute("data-video-link"),f=`clippop-player-container-${a}-${c}`;console.log(`Initializing ClipPop video ID: ${c}`);if("youtube"===a)c&&l.getElementById(f)?k[c]=new YT.Player(f,{height:"100%",width:"100%",videoId:c,playerVars:{enablejsapi:1,autoplay:0,controls:0,playsinline:1,mute:1,rel:0,loop:1,showinfo:0,origin:t.location.origin},events:{onReady:sa,onStateChange:ta}}):console.warn(`ClipPop container not found or video ID missing for YouTube element: ${c}`);else if("instagram"===a){const h=q("#"+f+" video");c&&h?(console.log(`Embedding Instagram reel for ID: ${c}`),h.addEventListener("ended",()=>{console.log("changed state: ",0,c);ca()}),k[c]={type:"instagram",video_id:c,link:d,playVideo:()=>{if(h.paused)try{h.play(),m=c,ba(),aa()}catch(g){console.error(`Instagram player ${c} failed:`,g)}},pauseVideo:()=>{h.paused||(h.pause(),setTimeout(N,1500))},isMuted:()=>h.muted,mute:()=>{h.muted=!0},unMute:()=>{h.muted=!1},seekTo:g=>{h.currentTime=g},getPlayerState:()=>h.paused?2:1}):console.warn("Instagram embed wrapper not found or reel URL missing for Instagram element:",b)}})},Aa=()=>{Array.from(F("#clippop-shortform-container-wrapper-"+G+" .cp-shortform-info")).forEach((b,a)=>{const c=b.getAttribute("data-product-no");c&&(b.addEventListener("click",d=>{t.open(qa+I("L3Byb2R1Y3QvZGV0YWlsLmh0bWw/Z2hvc3RfbWFsbF9pZD1jbGlwcG9wJnByb2R1Y3Rfbm89")+c,"_blank");d.preventDefault();d.stopPropagation()}),V&&S&&ra(I("L2FwaS92Mi9wcm9kdWN0cy8=")+c+I("P2ZpZWxkcz1wcm9kdWN0X25hbWUscHJpY2UscmV0YWlsX3ByaWNlLGRpc3BsYXksc2VsbGluZyxsaXN0X2ltYWdlLGRpc2NvdW50cHJpY2UmZW1iZWQ9ZGlzY291bnRwcmljZSZzaG9wX25vPQ==")+S).then(async function(d){if(d.product)if("T"==d.product.display&&"T"==d.product.selling){var f=d.product.retail_price&&d.product.retail_price>d.product.price?d.product.retail_price:d.product.price;let h=d.product.retail_price&&d.product.retail_price>d.product.price?d.product.price:0;h=d.product.discountprice&&d.product.discountprice.pc_discount_price?parseInt(d.product.discountprice.pc_discount_price):h;D&&(h=d.product.discountprice&&d.product.discountprice.mobile_discount_price?parseInt(d.product.discountprice.mobile_discount_price):h);if(-1!=T.indexOf("Cafe24Plus")||-1!=T.indexOf("Byapps"))h=d.product.discountprice&&d.product.discountprice.app_discount_price?parseInt(d.product.discountprice.app_discount_price):h;f=Y(parseInt(f),h);d=Z(d.product.list_image,d.product.product_name,f);b.innerHTML=d}else b.remove()}).catch(function(d){console.log("callCafe24API error: ",d)}))})},Ba=()=>{if(t.YT&&t.YT.Player||q(`script[src="${Q}"]`))console.log("YouTube API already loaded"),X(),ea();else{var b=l.createElement("script");b.src=Q;var a=l.getElementsByTagName("script")[0];a&&a.parentNode?a.parentNode.insertBefore(b,a):l.head.appendChild(b);b=I("b25Zb3VUdWJlSWZyYW1lQVBJUmVhZHk=");"function"!==typeof t[b]?t[b]=()=>{X()}:setTimeout(X,1E3);setTimeout(ea,2E3)}},oa=b=>{for(let a=b.length-1;0<a;a--){const c=Math.floor(Math.random()*(a+1));[b[a],b[c]]=[b[c],b[a]]}return b},ja=()=>{m&&k[m]&&!y&&(y=!0,k[m].pauseVideo(),k[m].mute(),m="");F('[id^="clippop-shortform-container-wrapper-"]').forEach(b=>{b.remove()});k={};L=-1;R=0;M=!0;m="";J=!0;y=!1;A=z=0},Ca=(b,a)=>{G=b.clip_uid;var c=b.clip_index.full||99999;const d=b.clip_index.pip||1E4;var f=D?b.loc_pip.mobile.loc:b.loc_pip.pc.loc;a&&(f="ct");a=D?b.loc_pip.mobile.mx:b.loc_pip.pc.mx;const h=D?b.loc_pip.mobile.my:b.loc_pip.pc.my;let g="auto",n="auto",v="auto",w="auto";"lb"==f?(v=h+"px",w=a+"px"):"lt"==f?(g=h+"px",w=a+"px"):"rb"==f?(v=h+"px",n=a+"px"):"rt"==f?(g=h+"px",n=a+"px"):"ct"==f&&(g="30%",w=D?"32%":"44%");a=`${g} ${n} ${v} ${w}`;f=D?b.loc_pip.mobile.pm:b.loc_pip.pc.pm;b=b.clip_index.rnd?oa(b.clip_data):[...b.clip_data];R=b.length||0;c=H("style",{type:"text/css",textContent:`    .cp-shortform-container-wrapper {        display: flex;        position: fixed;        top: 0;        left: 0;        width: 100%;        height: 100%;        font-size: 16px;        background-color: rgba(0, 0, 0, 0.8);        z-index: ${c};        justify-content: center;        align-items: center;        overflow: hidden;    }    .cp-shortform-container-pip-wrapper {        display: flex;        position: fixed;        top: 0;        left: 0;        aspect-ratio: 9 / 16;        min-width: 145px;        width: 20%;        max-width: 300px;        height: auto;        font-size: 12px;        background-color: rgba(0, 0, 0, 0.8);        z-index: ${d};        justify-content: center;        align-items: center;        border-radius: 10px;        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);        overflow: hidden;        inset: ${a};    }    .cp-shortform-container-dragging {        cursor: grabbing !important;        user-select: none;        -webkit-user-select: none;        -moz-user-select: none;        -ms-user-select: none;            }    .cp-shortform-container-no-scroll{        overflow:hidden !important;    }     .cp-shortform-container {        aspect-ratio: 9 / 16;        height: 100%;        overflow-y: scroll;        scroll-snap-type: y mandatory;        -webkit-overflow-scrolling: touch;                position: relative;        &::-webkit-scrollbar {display: none;}        scrollbar-width: none;        -ms-overflow-style: none;            }    .cp-buttons-container {        display: flex;        position: absolute;        top: 0px;        left: 0px;                width: 100%;        height: 100%;    }    .cp-buttons-container:hover {        background-color: rgba(0, 0, 0, 0.5);    }            .cp-shortform-video {        height: 100%;        width: 100%;        display: flex;        justify-content: center;        align-items: center;        scroll-snap-align: start;        position: relative;        background-color: #000;        overflow: hidden;    }    .cp-player-wrapper iframe {        display: block;        width: 100%;        height: 100%;    }    .cp-shortform-overlay {        position: absolute;        top: 0;        left: 0;        width: 100%;        height: 100%;    }    .cp-shortform-info {        position: absolute;        bottom: 10px;        left: 10px;        width: calc(100% - 20px);        box-sizing: border-box;        padding: .3rem;        display : flex;        justify-content : flex-start;        background: rgba(255,255,255,0.5);        -webkit-backdrop-filter:blur(10px);        backdrop-filter:blur(10px);        border-radius: 10px;        cursor: pointer;        z-index: ${d};    }    .cp-shortform-info:hover {        background-color: #fff;    }    .cp-shortform-img img{        width: 4em;        height: 4em;        object-fit: cover;        padding: .2rem;        background-color: #fff;        border: 1px solid #ccc;        border-radius: 10px;        max-height: 100%;        vertical-align: middle;        box-sizing: border-box;    }    .cp-shortform-desc {        width: calc(100% - 90px);        margin-left:10px;        display : flex;        flex-direction: column;        justify-content: center;    }    .cp-shortform-title { width: 100%; font-weight: bold; margin-bottom: .2em; overflow: hidden; white-space: nowrap; word-break: break-all; text-overflow: ellipsis;}    .cp-shortform-price { width: 100%; font-size: 0.9em; font-weight: bold; overflow: hidden; white-space: nowrap; word-break: break-all; text-overflow: ellipsis;}    .cp-shortform-price strike { font-size: 0.9em; font-weight: normal; color: #555;}    .cp-shortform-price salerate { color: #ff0000; margin: 0 5px;}    .cp-shortform-price salerate::after { font-size: 0.7em; font-weight: normal; content: "%";}    .cp-top-btn-container {        position: absolute;        top: 0px;        left: 0px;        width: 100%;        padding: 10px;        display: flex;        justify-content: space-between;        box-sizing: border-box;    }    .cp-top-btn-container div{        display: flex;    }    .cp-top-btn-container svg, .cp-scroll-btn-container svg {        width: 32px;        height: 32px;    }            .cp-top-btn-container button, .cp-play-btn-container button, .cp-scroll-btn-container button {        width: 40px;        height: 40px;        background-color: transparent;        color: rgba(255, 255, 255, 0.8);        border: none;        border-radius: 50%;        cursor: pointer;        display: flex;        justify-content: center;        align-items: center;        line-height: 0.9;        pointer-events: auto;    }          .cp-top-btn-container button:hover, .cp-play-btn-container button:hover, .cp-scroll-btn-container button:hover {        color: white;    }    .cp-play-btn-container {        position: absolute;        top: calc(50% - 20px);        left: 0px;        width: 100%;        padding: 10px;        display : flex;        justify-content : center;        align-items: center;        box-sizing: border-box;    }    .cp-play-btn-container button {        width: 20%;        height: 20%;        min-width: 40px;        min-height: 40px;                max-width: 80px;        max-height: 80px;    }    .cp-play-btn-container svg {        width: 100%;        height: 100%;    }              .cp-scroll-btn-container {        position: absolute;        bottom: 0px;        left: 0px;        width: 100%;        padding: 10px;        display : flex;        flex-direction: column;        justify-content : flex-end;        align-items: end;        box-sizing: border-box;    }    .cp-btn-small svg {        width: 16px;        height: 16px;    }    .cp-btn-animation-set {        display: none;        opacity: 0;        will-change: opacity;        backface-visibility: hidden;        transform: translateZ(0);        visibility: visible;    }    .cp-animation-fade-in {        animation: cpAnimationFadeIn 0.5s ease-in forwards;    }    .cp-animation-fade-out {        animation: cpAnimationFadeOut 0.5s ease-out forwards;    }    @keyframes cpAnimationFadeIn {        0% { opacity: 0; }        100% { opacity: 1; }    }    @keyframes cpAnimationFadeOut {        0% { opacity: 1; }        100% { opacity: 0; }    }    @media (pointer: coarse) {        .cp-top-btn-container {            height: 60px;            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%);        }        .cp-top-btn-container button, .cp-play-btn-container button, .cp-scroll-btn-container button {            color: rgba(255, 255, 255, 1.0);        }        .cp-buttons-container:hover {            background-color: transparent;        }    }    `});l.head.appendChild(c);c=H("div",{id:"clippop-shortform-container-wrapper-"+G,class:"cp-shortform-container"+("pip"==f?"-pip":"")+"-wrapper"});l.body.appendChild(c);H("div",{id:"clippop-shortform-container",class:"cp-shortform-container",parentNode:"clippop-shortform-container-wrapper-"+G});b.forEach(r=>{var p="";if(r.product&&0<r.product.length){p=r.product[0];var B=Y(p.price,p.sale);B=Z(p.img,p.name,B);p=`<div class="cp-shortform-info" data-product-no="${p.no}">${B}</div>`}H("div",{class:["cp-shortform-video","cp-"+r.type],attributes:{"data-video-type":r.type,"data-video-id":r.id,"data-video-link":r.link?r.link:""},parentNode:"clippop-shortform-container",htmlContent:`                <div id="clippop-player-container-${r.type}-${r.id}" class="cp-player-wrapper">${"instagram"==r.type?`<video poster="${r.thum}" src="${r.url}" muted playsinline style="width: 100%; height: 100%; object-fit: contain;"></video>`:""}}</div>                <div class="cp-shortform-overlay"></div>                ${p}            `})});H("div",{id:"clippop-buttons-container",class:"cp-buttons-container",parentNode:"clippop-shortform-container-wrapper-"+G});H("div",{id:"clippop-top-btn-container",class:"cp-top-btn-container",parentNode:"clippop-buttons-container",htmlContent:'\n        <div>\n        <button id="clippop-link-to-origin-btn" title="Instagram\uc5d0\uc11c \ubcf4\uae30" style="display:none;visibility:hidden;">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>\n            </svg>\n        </button>\n        </div>\n        <div>\n        <button id="clippop-mute-player-btn"></button>\n        <button id="clippop-fullscreen-player-btn" class="cp-btn-small" style="display:none">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707m4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707m0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707m-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707"/>\n            </svg>\n        </button>        \n        <button id="clippop-close-player-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>\n            </svg>\n        </button>\n        </div>\n        '});H("div",{id:"clippop-play-btn-container",class:"cp-play-btn-container",parentNode:"clippop-buttons-container",htmlContent:'<button id="clippop-play-stop-btn" class="cp-btn-animation-set"></button>'});H("div",{id:"clippop-scroll-btn-container",class:"cp-scroll-btn-container",parentNode:"clippop-buttons-container",htmlContent:'\n        <button id="clippop-scroll-up-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z"/>\n            </svg>\n        </button>      \n        <button id="clippop-scroll-down-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>\n            </svg>\n        </button>\n        '});Ba();Aa();wa(f);xa();ya();za()},Da=(b,a)=>{if(b){var c=pa('[name="path_role"]'),d="";if(!a&&"PRODUCT_DETAIL"==c){var f="undefined"!==typeof iProductNo?iProductNo:"";if(!f&&S&&void 0!==t.sessionStorage){var h=t.sessionStorage.getItem("localRecentProduct"+S);null!==h&&(h=JSON.parse(h),!f&&h[0].iProductNo&&(f=h[0].iProductNo))}f&&(d="PRODUCT_DETAIL:"+f)}f=a?b.filter(g=>g.clip_uid==a):b.filter(g=>!0===g.is_show&&(g.location.includes("ALL")||g.location.includes(c)||d&&g.location.includes(d)));0<f.length?(h=0,1<f.length&&(h=Math.floor(Math.random()*f.length),f=oa(f)),Ca(f[h],a)):a&&alert("\uc694\uccad\ud558\uc2e0 \ud074\ub9bd\ud31d \uc601\uc0c1\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");a||(f=b.filter(g=>!0===g.is_show&&g.location.includes("EMBED")),0<f.length&&na(f))}},ma=b=>{U&&fetch(I("aHR0cHM6Ly93aXRoYXBwc2hvc3QubXljYWZlMjQuY29tL2NsaXBwb3AvanNvbj9taWQ9")+U,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(a){if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>Da(a,b)).catch(function(a){console.log("Load Clips failed",a)})};ma()})(window,document);
